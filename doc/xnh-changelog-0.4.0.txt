xNetHack 0.4.0 Changelog

This is a minor version of xNetHack. It is a fork off of the vanilla NetHack
3.6.1 release, and is also based directly on xNetHack 0.3.0. It will continue
to contain all of the latest commits pushed by the vanilla devteam on their
3.6.2 branch; see doc/fixes36.2 for these changes.

The xNetHack page at the NetHackWiki, https://nethackwiki.com/wiki/XNetHack,
attempts to describe these changes in a way that's better formatted and more
friendly to players. However, it might be out of date; in case of conflicting
information, this changelog and others in this folder are more up-to-date than
the wiki page, and the commit messages are more up-to-date than this changelog.

On top of any changes made by the NetHack devteam on 3.6.1, and any changes
made in previous xNetHack versions, xNetHack 0.4.0 contains the following
gameplay changes:

Remove the scroll of amnesia. In its place, create the scroll of water, which
  behaves mostly like UnNetHack's scroll of flood, except it will never create
  a pool underneath the player. It costs 200 and takes 4-7 ink to write. It is
  unblankable except by acid.
Also from UnNetHack, random graves may have a scroll of water placed on them,
  and the epitaph is then "Apres moi, le deluge."
Remove mind flayers' amnesia. They still drain Int.
Monsters created along with rooms will never generate on top of stairs.
If the player enters a level on a spot where there is a monster, always
  displace the monster away. (Previously this only happened 50% of the time,
  and the other 50% the player was moved.)
Monster groups, small and large, now have their sizes fuzzed a bit.
Most create monster sources will no longer create groups of monsters.
Add polyinit mode: you begin the game permanently polymorphed into a monster of
  your choice. This is a non-scoring mode like explore mode, and can be
  combined with explore mode (and wizard mode of course). To enable, set
  OPTIONS=polyinit:[monster] in your config file.
  You can polyinit to anything except player monsters and uniques. Any other
  monsters are fair game, but if you can't polymorph into one in a normal game,
  it's not officially supported. Beware of crashes.
  In polyinit mode, you will never leave bones.
Extrinsic sources of fire, cold, and shock resistance provide immunity to all
  items in your inventory from that type of damage.
Eating mimic corpses no longer breaks polyselfless conduct.
Tourists now begin the game wearing low boots (walking shoes).
Martial arts attacks now always include skill damage bonuses, instead of
  randomly not getting them 75% of the time.
Several more tools are now eligible to receive non-default object materials.
  Mostly these are instruments: all whistles, harps, flutes, horns, and bugles.
  Lanterns and lamps are also now eligible.
  Horns use their own new list; everything else made eligible uses a separate
    new "resonant" list.
  Several items are renamed due to containing materials in the name:
    "wooden flute" -> "flute"
    "wooden harp" -> "harp"
    "tin whistle" -> "pea whistle"
    "brass lantern" -> "lantern"
    "silver bell" (for the Bell of Opening) -> "engraved silver bell"
Slight tweak to the object material probabilities for bows.
Weapons made out of bone can hit shades (they don't get any bonuses though)
Silver-hating has been refactored and generalized into any-material-hating.
  Behavior for silver itself is NOT changed: all silver haters still hate
    silver and it still sears them for d20 damage.
  Other material hatred does not cause searing, it causes pain and flinching
    but does only d6 bonus damage, and the player can touch and use items made
    of a material they hate (unlike silver, which if the player hates it will
    be unhandleable.)
  Elves (including elvish players), nymphs, and all i-class monsters now hate
    iron.
  Fungi, Pestilence, and anything else with a disease or rotting attack now
    hates copper.
Copper antimicrobialness resists sickness: for each piece of copper armor you
  wear, you have a stacking 20% chance to not fall Ill when you would have
  otherwise.
Object material densities have been overhauled because the "ultra realistic"
  ones did not make for good gameplay. They are now arbitrary units that will
  hopefully preserve some realism while still making for good gameplay.
Object material prices per aum have also been updated, but only for gold,
  platinum, and mithril, all of which have been made more expensive.
Object material AC has one slight tweak: MINERAL is reduced by 2 points.
Some base materials have been changed to make life easier for elvish players:
  Runeswords, and therefore Stormbringer, are now metal.
  Athames and therefore Magicbane are now metal.
  All amulets, and therefore the Eye of the Aethiopica, are now metal.
  The Mitre of Holiness is now silver.
You can now refresh your memory with a spellbook whenever you want, rather than
  forcing you to wait until it dips below 10% retention.
Implement player-as-an-Archon blinding gaze attack (code by Pavel Braginskiy)
The Barbarian lower filler and goal levels are replaced.
The chance of a successful artifact wish is now 1/(# of artifact wishes + 1).
  This means that randomly generated, named, and gifted artifacts do not count
  against your chances. However, unsuccessful wishes still count against you.
The chance of a god gift on a sacrifice is now 1/(10 + 2 * gifts^2).
  This again means that randomly generated, named, and wished-for artifacts do
  not count against your chances.
Sokoban luck penalties for jumping, hurtling, and dragging yourself via thrown
  ball are removed, since none of them can actually be cheated with.
The spiders-spinning-webs feature introduced in 0.1.0 ascended to vanilla, and
  has been backported from there so that xNetHack's version now behaves the
  same as vanilla.
  Additionally, shopkeepers will also clean up webs spun in their shops.
The SLASH'EM feature in which corpses in the taint-risk stage can spontaneously
  morph into living F monsters has been ported.

It contains the following non-gameplay interface changes:

When you kill the Wizard of Yendor, the livelog prints where you are in the
  dungeon.
If you die while stuck in creature form, your actual death reason is shown, and
  the "while stuck in creature form" is recorded in the while field of the
  xlogfile.
The livelogging patch is extended to include arising from the dead or slime as
  a sentient copy of the monster. This is a livelog flag of 0x0200.
The #terrain command works while hallucinating, confused or stunned.
Cursed scrolls of remove curse no longer give "You feel like someone is helping
  you", since they don't practically uncurse anything.
The spell menu now shows the exact number of turns of spell memory you have in
  the "Retention" column, rather than vague percentages.
When a potion of oil fails to dilute in water, give a message and identify the
  potion.
Usual update of more gravestone messages, random engravings, and shirt
  messages.
Easter egg when you read a dwarvish ring mail.
Suppress "Unknown command 'foo'." messages in the dumplog.

It contains the following non-gameplay architectural changes:

Remove all (now dead) code relating to amnesia.
Add a makemon flag for suppressing the creation of monster groups.
Enable LIVELOGFLAGS in the sysconf. Livelogging is still disabled by default in
  config.h.
Fix two critical bugs in the selection_do_grow code.
